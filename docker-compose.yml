version: '3.9'
services:
    web:
        build: .
        ports:
            - "81:81"
        volumes:
            - .:/code
        depends_on:
            - mongo
            - neo4j
        command: python3 -u populate_neo4j.py

    mongo:
        image: mongo
    neo4j:
        container_name: neo4j_restaurant
        image: neo4j:3.5.8
        hostname: neo
        expose:
            - 7474
            - 7687

        ports:
            - "7474:7474"
            - "7687:7687"

        environment:
            - NEO4J_AUTH=$NEO4J_CREDENTIALS
            - NEO4J_INTERNAL_URL=$NEO4J_INTERNAL_URL
